# ***Приложение для анализа банковских операций***

## Описание:

Приложение на Python по работе с банковскими операциями клиента.
####

### ГЛАВНАЯ

**Прописаны функции:**
- основная функция, которая отвечает за основную логику проекта и связывает функциональности между собой
- возвращает приветствие в зависимости от времени суток пользователя
- принимает путь до EXCEL-файла и возвращает данные финансовых транзакций
- находит все транзакции с начала месяца по введенную дату
- группирует данные по номерам карт, суммирует расходы и выводим начисленный кэшбэк
- делает запрос к стороннему API и возвращает курсы валют в нужном формате
- делает запрос к стороннему API и возвращает данные по акциям в нужном формате
- сортирует отфильтрованные ранее по дате данные по абсолютному значению суммы операции и
    возвращает только первые 5 строк
- записывает полученные ранее данные по отфильтрованным транзакциям в словарь
    для удобства его преобразования в JSON-объект
- формирует итоговый отчет на основании полученных ранее данных и вывод его в формате JSON
~~~
Возвращается JSON-ответ со следующими данными:
Приветствие в формате 
 — «Доброе утро» / «Добрый день» / «Добрый вечер» / «Доброй ночи» в зависимости от текущего времени.
По каждой карте:
последние 4 цифры карты;
общая сумма расходов;
кешбэк (1 рубль на каждые 100 рублей).
Топ-5 транзакций по сумме платежа.
Курс валют.
Стоимость акций из S&P500.
~~~

### СЕРВИСЫ

Пользователь передает строку для поиска, возвращается JSON-ответ со всеми транзакциями, 
содержащими запрос в описании или категории.
- фильтрация полученного списка по введенному пользователем слову для поиска

### ОТЧЕТЫ

- фильтрация списков, отсортированных по заданным параметрам
- выбираются только те транзакции, которые относятся к заданной категории
- получаем у пользователя дату для формирования отчета по транзакциям за определенный период
- выбираются только те транзакции, которые были совершены за последние три месяца от переданной даты
- возвращается сумма трат по заданной категории за последние три месяца
- полученные данные преобразуются в список формата json
- созданный для функции декоратор сохраняет результат в файл my_report.json


Написаны тестовые функции с использованием библиотеки pytest для существующего кода проекта.
Использованы фикстуры для формирования входных данных для тестов, а также параметризация в тестах для запуска 
тестов с различным набором входных параметров.

Написаны тесты с использованием специальных инструментов Mock и patch

Реализовано логирование в текущем проекте. Использована для этого библиотека logging.

Написан декоратор log, который будет логировать вызов функций-обработчиков и результаты их работы. 
Это поможет отслеживать работу системы и быстро реагировать на возможные ошибки.

***
Покрытие тестами 100% кода, согласно Code coverage.
***

## Установка:

1. Клонируйте [репозиторий](https://github.com/El1Futuro/CourseWork3.git):
~~~ 
git clone https://github.com/El1Futuro/CourseWork3.git 
~~~
2. Установите зависимости:
```
pip freeze > requirements.txt
```
```
pip install -r requirements.txt
```
## Использование:

****
**Для запуска программы запустите файл ***main***.**
****
По окончании клонирования будет открыт проект. Вы можете работать с этим проектом локально и отправлять свои коммиты 
в удаленный клонированный репозиторий.

Также возможно дополнительно проводить тестирование кода при помощи фреймворка Pytest.
Запуск pytest удобнее всего производить из PyCharm.
Команда терминала 
```
pytest
``` 
запускает все тесты текущего каталога. 

Чем выше процент покрытия кода, тем больше вероятность обнаружения ошибок и проблем в программе. 
В pytest для анализа покрытия кода надо поставить библиотеку 
pytest-cov:
```
poetry add --group dev pytest-cov
```
Чтобы запустить тесты с оценкой покрытия, можно воспользоваться следующими командами:
```
pytest --cov
```
 — при активированном виртуальном окружении.
```
poetry run pytest --cov
```
 — через poetry.
```
pytest --cov=src --cov-report=html
```
 — чтобы сгенерировать отчет о покрытии в HTML-формате, где 
src — пакет c модулями, которые тестируем. Отчет будет сгенерирован в папке 
htmlcov и храниться в файле с названием index.html.

## Документация:

Для получения дополнительной информации обратитесь к [документации](https://github.com/El1Futuro/CourseWork3#/README.md).

## Лицензия:

Этот проект лицензирован по [лицензии MIT](LICENSE).